async function getCustomerData({url:t,username:e,password:n}){const o={action:"getCustomer",params:{username:e,password:n}};try{const e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),n=await e.json();if(n.success){const t=n.result.plans,e=new Date(t.expiration+" "+t.recharged_time).toLocaleString("en-GB",{day:"2-digit",month:"long",hour:"2-digit",minute:"2-digit"});return{name:t.namebp,expiry:e}}return console.log("Error:",n.message),null}catch(t){return console.error("Error:",t),null}}async function fetchConfig(){const t=await fetch("/config.json");if(!t.ok)throw new Error("Failed to fetch config");return t.json()}function setIdentity(t,e){document.getElementById("site-title").textContent=t,document.getElementById("site-description").textContent=e}async function initializeConfig(){const t=await fetchConfig();return setIdentity(t.title,t.description),t}function getCredentials(){return{username:document.getElementById("username").textContent,password:document.getElementById("password").textContent}}export async function initialize(){try{const t=await initializeConfig();document.getElementById("current-year").textContent=(new Date).getFullYear();const{username:e,password:n}=getCredentials(),o=`${t.baseURL}/system/api.php?r=hotspot`,{name:r,expiry:i}=await getCustomerData({url:o,username:e,password:n});document.getElementById("expiry-date").textContent=i,document.getElementById("current-plan").textContent=r}catch(t){console.error("Initialization error:",t)}}document.addEventListener("DOMContentLoaded",initialize);
